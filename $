#version 330

in vec2 vFragPosition;

out vec3 fFragColor;

const int N_MAX = 100;

vec2 complexSqr(vec2 z) {

	float x = z.x;
	float y = z.y;

	float _x = (x * x) - (y * y);
	float _y = 2 * x * y;

	return vec2(_x, _y);
}

void main() {

	vec3 color = vec3(1, 1, 1);

	vec2 c = vFragPosition;
	vec2 z = vec2(0, 0);

	for (int i = 0; i < N_MAX; i++) {

		z = complexSqr(z) + c;

		if (length(z) > 2) {
			color = vec3(float(i) / N_MAX);
			break;
		}
	}

	fFragColor = color;
}
